Refactor the code: $ARGUMENTS

Please help me refactor by following these steps:

1. **Analyze current code** - Understand the existing implementation, patterns, and dependencies
2. **Identify issues** - Look for code smells, duplication, complexity, or maintainability problems
3. **Plan refactoring** - Outline the changes needed and potential risks
4. **Implement changes** - Make incremental improvements while preserving functionality
5. **Verify behavior** - Ensure all tests pass and functionality remains intact
6. **Update documentation** - Modify comments, README, or other docs as needed

Focus on:
- **Reducing complexity** - Simplify complex functions or classes
- **Eliminating duplication** - Extract common code into reusable functions
- **Improving naming** - Use clear, descriptive names for variables and functions
- **Enhancing structure** - Organize code into logical modules or components
- **Performance optimization** - Improve efficiency where appropriate
- **Type safety** - Add or improve type annotations where applicable

Always:
- Run existing tests to ensure nothing breaks
- Make small, incremental changes
- Preserve the original behavior
- Add tests for new abstractions if needed
